<!--
  Launches gopher mind control.

  Eventually as part of the rapp
 -->
<launch>
  <arg name="dont_wait_for_hoomans"      default="false" doc="automate hooman interaction via the 'go' button." />
  <arg name="autoload_test_delivery"     default="false" doc="automatically load a test semantic locations list and drop a delivery goal to run on startup"/>
  <arg name="enable_honks"               default="false" doc="honk when certain behaviours are executed"/>
  <!-- <arg name="battery_levels_config_file" default="" doc="configuration for the battery levels"/> -->
  <arg name="battery_levels_yaml"        default="$(find gopher_rocon_bootstrap)/param/battery_levels.yaml" doc="location of battery level yaml"/>
  <arg name="enable_dock_interrupt"      default="true"  doc="allow the docking behaviour to be interrupted when a message is received on the cancel button topic "/>

  <node name="gopher_deliveries" type="gopher_deliveries" pkg="gopher_behaviours">
    <remap from="gopher_deliveries/battery"               to="/gopher/status/battery_slow"/>
    <remap from="gopher_deliveries/move_base/cancel"      to="/navi/move_base/cancel"/>
    <remap from="gopher_deliveries/move_base/feedback"    to="/navi/move_base/feedback"/>
    <remap from="gopher_deliveries/move_base/goal"        to="/navi/move_base/goal"/>
    <remap from="gopher_deliveries/move_base/result"      to="/navi/move_base/result"/>
    <remap from="gopher_deliveries/move_base/status"      to="/navi/move_base/status"/>
    <remap from="gopher_deliveries/semantic_locations"    to="/navi/semantic_locations"/>
    <remap from="gopher_deliveries/display_notification"  to="/gopher/status_notifier/display_notification"/>
    
    <remap from="gopher_deliveries/autonomous_docking/cancel"    to="/gopher/autonomous_docking/cancel"/>
    <remap from="gopher_deliveries/autonomous_docking/feedback"  to="/gopher/autonomous_docking/feedback"/>
    <remap from="gopher_deliveries/autonomous_docking/goal"      to="/gopher/autonomous_docking/goal"/>
    <remap from="gopher_deliveries/autonomous_docking/result"    to="/gopher/autonomous_docking/result"/>
    <remap from="gopher_deliveries/autonomous_docking/status"    to="/gopher/autonomous_docking/status"/>

    <remap from="gopher_deliveries/simple_motion_controller/cancel"    to="/gopher/simple_motion_controller/cancel"/>
    <remap from="gopher_deliveries/simple_motion_controller/feedback"  to="/gopher/simple_motion_controller/feedback"/>
    <remap from="gopher_deliveries/simple_motion_controller/goal"      to="/gopher/simple_motion_controller/goal"/>
    <remap from="gopher_deliveries/simple_motion_controller/result"    to="/gopher/simple_motion_controller/result"/>
    <remap from="gopher_deliveries/simple_motion_controller/status"    to="/gopher/simple_motion_controller/status"/>
    
    <remap from="delivery/goal"                         to="/rocon/delivery/goal"/>
    <remap from="delivery/feedback"                     to="/rocon/delivery/feedback"/>
    <remap from="delivery/cancel"                       to="/rocon/delivery/cancel"/>
    <remap from="delivery/result"                       to="/rocon/delivery/result"/>
    <remap from="delivery/go"                           to="/gopher/buttons/go"/>

    <remap from="ar_pose_marker_short_range"            to="/gopher/ar_pose_marker_short_range"/>
    
    <!-- Battery level information parameters for activating the low battery
         tree-->
    <rosparam command="load" file="$(arg battery_levels_yaml)"/>
    <rosparam param="dont_wait_for_hoomans" subst_value="True">$(arg dont_wait_for_hoomans)</rosparam>
    <rosparam param="autoload_test_delivery" subst_value="True">$(arg autoload_test_delivery)</rosparam>
    <param name="enable_honks" value="$(arg enable_honks)"/>
    <param name="waiting_honk" value="i_am_groot"/>
    <param name="moving_honk" value="nothing"/>
    <param name="enable_dock_interrupt" value="$(arg enable_dock_interrupt)"/>
    <param name="semantics_parameter_namespace" value="/rocon/semantics"/>
  </node>
</launch>
